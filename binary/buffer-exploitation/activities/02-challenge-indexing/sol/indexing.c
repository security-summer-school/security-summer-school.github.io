#include <stdio.h>
#include <stdlib.h>

void clear_stdin(void)
{
	char x = 0;
	while (1) {
		x = getchar();
		if (x == '\n' || x == EOF)
			break;
	}
}

void print_banner(void)
{
	printf("################################################################################\n");
	printf("Welcome to the Simple Storage Service!\n");
	printf("You can store any value anywhere!\n");
	printf("################################################################################\n");
	fflush(stdout);
}

void get_shell()
{
	system("/bin/sh");
}

void f(unsigned long* storage)
{
	unsigned long index;
	unsigned long value;
	print_banner();

	/* Read index */
	printf("Index: ");
	fflush(stdout);
	scanf("%lu", &index);
	/*clear_stdin();*/

	/* Read value */
	printf("Value: ");
	fflush(stdout);
	scanf("%lu", &value);
	/*clear_stdin();*/

	storage[index] = value;
	puts("Ok, have fun!\n");
	fflush(stdout);
}

int main(int argc, char* argv[])
{
	setvbuf(stdin, NULL, _IONBF, 0);
        setvbuf(stdout, NULL, _IONBF, 0);

	unsigned long storage[32];
	f(storage);
	return 0;
}
